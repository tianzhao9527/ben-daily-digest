<!doctype html>
<html lang="zh-CN"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Daily Digest Â· 2026-01-03</title>
<style>
:root{--bg:#f5f5f7;--card:#fff;--text:#0b0b0f;--muted:#6e6e73;--line:rgba(0,0,0,.10);--shadow:0 10px 30px rgba(0,0,0,.06);--r:18px;--r2:14px;--accent:#0a84ff;--chip:rgba(0,0,0,.05)}
[data-theme="dark"]{--bg:#0b0b0f;--card:rgba(18,18,24,.94);--text:#f5f5f7;--muted:#a1a1aa;--line:rgba(255,255,255,.12);--shadow:0 14px 44px rgba(0,0,0,.45);--chip:rgba(255,255,255,.08)}
*{box-sizing:border-box}html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Text","PingFang SC","Hiragino Sans GB","Microsoft YaHei","Noto Sans CJK SC",Arial,sans-serif}
a{color:inherit;text-decoration:none}a:hover{color:var(--accent)}
.container{max-width:1480px;margin:0 auto;padding:18px;display:grid;gap:16px;grid-template-columns:320px minmax(0,1fr) 420px;height:100vh;overflow:hidden}
.card{background:var(--card);border:1px solid var(--line);border-radius:var(--r);box-shadow:var(--shadow);min-height:0;overflow:hidden}
.left{display:flex;flex-direction:column}.brand{padding:16px 16px 12px;border-bottom:1px solid var(--line)}
.brand .title{font-size:15px;font-weight:860}.brand .sub{margin-top:6px;font-size:12px;color:var(--muted);line-height:1.45}
.controls{padding:12px 16px;border-bottom:1px solid var(--line)}
.search{width:100%;border:1px solid var(--line);background:transparent;padding:10px 12px;border-radius:12px;outline:none;color:var(--text);font-size:12px}
.pills{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
.pill{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);color:var(--muted);background:transparent;cursor:pointer}
.pill.active{color:var(--text);border-color:rgba(10,132,255,.40);background:rgba(10,132,255,.12)}
.nav{padding:10px 10px 14px;overflow:auto;min-height:0}
.nav a{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-radius:14px;color:var(--text)}
.nav a:hover{background:var(--chip)}.nav a.active{background:rgba(10,132,255,.12);border:1px solid rgba(10,132,255,.20)}
.badge{font-size:12px;color:var(--muted);background:var(--chip);border:1px solid var(--line);padding:3px 8px;border-radius:999px}
.left-foot{margin-top:auto;padding:12px 16px;border-top:1px solid var(--line);display:flex;gap:10px;justify-content:space-between;align-items:center;color:var(--muted);font-size:12px}
.btn{border:1px solid var(--line);background:transparent;color:var(--text);padding:9px 12px;border-radius:12px;font-size:12px;cursor:pointer}
.btn:hover{border-color:rgba(10,132,255,.30)}
.main{display:flex;flex-direction:column}.topbar{padding:16px;border-bottom:1px solid var(--line);position:sticky;top:0;z-index:10;background:var(--card)}
.h1{font-size:18px;font-weight:900}.meta{margin-top:6px;font-size:12px;color:var(--muted);line-height:1.45}
.main-scroll{padding:16px;overflow:auto;min-height:0}
.section{scroll-margin-top:90px;margin-bottom:18px}
.section-head{display:flex;align-items:flex-end;justify-content:space-between;gap:10px;margin-bottom:10px}
.section-title{font-size:14px;font-weight:860}.small{font-size:12px;color:var(--muted)}
.brief{border:1px solid var(--line);border-radius:var(--r2);padding:14px;line-height:1.75;font-size:13px}
.actions{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
.tag{font-size:11px;color:var(--muted);border:1px solid var(--line);background:var(--chip);padding:4px 8px;border-radius:999px}
.cards{margin-top:12px;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
.event{border:1px solid var(--line);border-radius:var(--r2);padding:12px;transition:.12s ease;display:flex;flex-direction:column;gap:8px}
.event:hover{border-color:rgba(10,132,255,.22);background:rgba(10,132,255,.06)}
.e-title{font-size:13px;font-weight:820;line-height:1.35}
.e-meta{font-size:12px;color:var(--muted);display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap}
.e-sum{font-size:12px;line-height:1.55}
.e-links{margin-top:auto;display:flex;justify-content:space-between;align-items:center;gap:10px}
.link{font-size:12px;color:var(--accent)}
.fb{display:flex;gap:8px}
.iconbtn{border:1px solid var(--line);background:transparent;color:var(--muted);padding:6px 8px;border-radius:10px;cursor:pointer;font-size:12px}
.iconbtn.active.good{border-color:rgba(34,197,94,.45);background:rgba(34,197,94,.12);color:var(--text)}
.iconbtn.active.bad{border-color:rgba(239,68,68,.45);background:rgba(239,68,68,.12);color:var(--text)}
.right{display:flex;flex-direction:column}
.right-sticky{position:sticky;top:0;z-index:10;background:var(--card);border-bottom:1px solid var(--line);padding:16px}
.right-title{font-size:14px;font-weight:880}.right-sub{margin-top:6px;font-size:12px;color:var(--muted);line-height:1.45}
.right-scroll{padding:14px 16px 16px;overflow:auto;min-height:0}
.kgrid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
.kpi{border:1px solid var(--line);border-radius:var(--r2);padding:12px}
.k-head{font-size:12px;color:var(--muted);display:flex;justify-content:space-between;gap:10px}
.k-val{margin-top:6px;font-size:18px;font-weight:900}
.k-delta{margin-top:4px;font-size:12px;color:var(--muted)}
.spark{margin-top:10px;width:100%;height:44px;display:block}
.hr{height:1px;background:var(--line);margin:14px 0}.group{font-size:12px;color:var(--muted);font-weight:800;margin:8px 0}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);opacity:0;pointer-events:none;transition:.18s ease;z-index:999}
.overlay.open{opacity:1;pointer-events:auto}
.panel{position:absolute;right:18px;top:18px;bottom:18px;width:min(520px,calc(100vw - 36px));background:var(--card);border:1px solid var(--line);border-radius:var(--r);box-shadow:var(--shadow);display:flex;flex-direction:column;overflow:hidden}
.phead{padding:16px;border-bottom:1px solid var(--line);display:flex;justify-content:space-between;align-items:center}
.ptitle{font-size:14px;font-weight:900}
.tabs{padding:10px 16px;border-bottom:1px solid var(--line);display:flex;gap:8px;flex-wrap:wrap}
.tab{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);color:var(--muted);cursor:pointer}
.tab.active{color:var(--text);border-color:rgba(10,132,255,.40);background:rgba(10,132,255,.12)}
.pbody{padding:14px 16px;overflow:auto;min-height:0}
.row{display:flex;justify-content:space-between;gap:14px;align-items:center;margin:10px 0}
.label{font-size:12px;color:var(--muted);line-height:1.4}
.input{width:160px;border:1px solid var(--line);border-radius:12px;padding:9px 10px;background:transparent;color:var(--text);font-size:12px;outline:none}
.note{font-size:12px;color:var(--muted);line-height:1.5;margin-top:10px}
@media (max-width:1200px){.container{grid-template-columns:320px 1fr}.right{display:none}}
@media (max-width:900px){.container{grid-template-columns:1fr;height:auto}.left{display:none}.cards{grid-template-columns:1fr}}
</style></head>
<body>
<div class="container">
  <aside class="card left">
    <div class="brand"><div class="title">Bençš„æ¯æ—¥èµ„è®¯ç®€æŠ¥</div>
      <div class="sub">Apple News é£æ ¼ Â· é™æ€é¡µé¢<br>æ—¥æœŸï¼š2026-01-03 Â· ç”Ÿæˆï¼š<span id="genAt">â€”</span></div>
    </div>
    <div class="controls">
      <input id="q" class="search" placeholder="æœç´¢æ ‡é¢˜/æ ‡ç­¾/æ¥æºâ€¦"/>
      <div class="pills">
        <div class="pill active" data-view="all">å…¨éƒ¨</div>
        <div class="pill" data-view="cn">ä¸­å›½ç›¸å…³</div>
        <div class="pill" data-view="global">å…¨çƒï¼ˆä¸å«ä¸­å›½ï¼‰</div>
      </div>
    </div>
    <nav class="nav" id="nav"></nav>
    <div class="left-foot">
      <button class="btn" id="btnHome">å›åˆ°é¡¶éƒ¨</button>
      <button class="btn" id="btnSettings">è®¾ç½®</button>
    </div>
  </aside>

  <main class="card main">
    <div class="topbar">
      <div class="h1">ä»Šæ—¥è¦ç‚¹ä¸äº‹ä»¶å¡</div>
      <div class="meta">é»˜è®¤ 30 åˆ†é’Ÿæ¨¡å¼ï¼ˆæ¯æ  Top 5ï¼‰ï¼Œå¯åœ¨è®¾ç½®åˆ‡æ¢å…¨é‡ï¼ˆ10â€“20æ¡ï¼‰ã€‚æ‰€æœ‰å†…å®¹å·²é¢„æ¸²æŸ“ï¼Œæ— å®¢æˆ·ç«¯æŠ“å–ã€‚</div>
    </div>
    <div class="main-scroll" id="main"></div>
  </main>

  <aside class="card right">
    <div class="right-sticky">
      <div class="right-title">æ•°æ®ä¸è¶‹åŠ¿å¿«ç…§</div>
      <div class="right-sub">ç”Ÿæˆæ—¶åˆ»å¿«ç…§ï¼ˆå·²å†…åµŒï¼‰<br>æ›´æ–°æ—¶é—´ï¼š<span id="kpiAt">â€”</span></div>
    </div>
    <div class="right-scroll">
      <div class="group">LME é‡‘å±ï¼ˆProxyï¼‰</div><div class="kgrid" id="kMetals"></div>
      <div class="hr"></div>
      <div class="group">åˆ©ç‡ / æ±‡ç‡ / ç¾å…ƒ</div><div class="kgrid" id="kMacro"></div>
      <div class="hr"></div>
      <div class="group">åé¦ˆé—­ç¯</div>
      <div class="kpi">
        <div class="k-head"><span>7 å¤©çª—å£</span><span id="fbCount">0</span></div>
        <div class="k-delta">ç‚¹ ğŸ‘/ğŸ‘ å½¢æˆåå¥½ï¼›å¯å¯¼å‡ºåé¦ˆä¾›ç”Ÿæˆç«¯è¯»å–ï¼ˆç”¨äºâ€œé€‰é¢˜é—­ç¯â€ï¼‰ã€‚</div>
        <div style="display:flex;gap:10px;margin-top:10px;flex-wrap:wrap">
          <button class="btn" id="btnExport">å¯¼å‡ºåé¦ˆ</button>
          <button class="btn" id="btnClearFB">æ¸…ç©ºæœ¬æœºåé¦ˆ</button>
        </div>
      </div>
    </div>
  </aside>
</div>

<div class="overlay" id="overlay">
  <div class="panel">
    <div class="phead"><div class="ptitle">è®¾ç½®</div><button class="btn" id="btnClose">å…³é—­</button></div>
    <div class="tabs">
      <div class="tab active" data-tab="general">é€šç”¨</div>
      <div class="tab" data-tab="layout">å¸ƒå±€</div>
      <div class="tab" data-tab="algo">ç®—æ³•</div>
      <div class="tab" data-tab="config">æ‰©å±•</div>
    </div>
    <div class="pbody" id="pbody"></div>
  </div>
</div>

<script>window.DIGEST = __DIGEST_JSON__;</script>
<script>
(function(){
  const D = window.DIGEST || {date:"",generated_at_bjt:"",sections:[],kpis:{metals:[],macro:[]},config:{}};
  const nav = document.getElementById('nav'), main = document.getElementById('main'), q=document.getElementById('q');
  const pills=[...document.querySelectorAll('.pill')];
  const overlay=document.getElementById('overlay'), pbody=document.getElementById('pbody'), tabs=[...document.querySelectorAll('.tab')];
  document.getElementById('genAt').textContent=D.generated_at_bjt||'â€”';
  document.getElementById('kpiAt').textContent=(D.kpis&&D.kpis.generated_at_bjt)||D.generated_at_bjt||'â€”';

  const key='digest_settings_v15';
  const st=JSON.parse(localStorage.getItem(key)||'{}');
  const defaults={theme:'auto',readingMode:'30m',perSectionFull:15,perSection30m:5,weights:{timeliness:0.35,authority:0.2,relevance:0.2,impact:0.15,novelty:0.1}};
  const S=Object.assign({},defaults,st); const W=Object.assign({},defaults.weights,S.weights||{});
  function save(){localStorage.setItem(key,JSON.stringify(Object.assign({},S,{weights:W})));}

  function applyTheme(){ if(S.theme==='auto') document.documentElement.removeAttribute('data-theme'); else document.documentElement.setAttribute('data-theme',S.theme); }
  applyTheme();

  let view='all';
  function setView(v){view=v; pills.forEach(p=>p.classList.toggle('active',p.dataset.view===v)); render();}
  pills.forEach(p=>p.addEventListener('click',()=>setView(p.dataset.view)));

  function esc(s){return (s||'').replace(/[&<>"']/g,c=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" }[c]));}
  function norm(s){return (s||'').toLowerCase().replace(/[^a-z0-9ä¸€-é¿¿]+/g,' ').trim();}
  function matchView(ev){ if(view==='all') return true; return ev.region===view; }
  function matchQuery(ev){ const t=norm(q.value); if(!t) return true; const hay=norm([ev.title_zh,ev.title,ev.source_hint,(ev.tags||[]).join(' ')].join(' ')); return hay.includes(t); }

  const fbPrefix='digest_fb_v15_'; const seven=7*24*3600*1000;
  function fbKey(id){return fbPrefix+id;}
  function setFB(id,v){localStorage.setItem(fbKey(id),JSON.stringify({v,t:Date.now()})); render(); updateFBCount();}
  function getFB(id){const raw=localStorage.getItem(fbKey(id)); if(!raw) return null; try{return JSON.parse(raw);}catch(e){return null;}}
  function updateFBCount(){
    const keys=Object.keys(localStorage).filter(k=>k.startsWith(fbPrefix)); let alive=0; const now=Date.now();
    for(const k of keys){ try{const o=JSON.parse(localStorage.getItem(k)); if(o && (now-o.t)<=seven) alive++;}catch(e){} }
    document.getElementById('fbCount').textContent=alive+' æ¡';
  }
  updateFBCount();

  function kpiBox(x){
    const d=(x.delta==null)?'â€”':((x.delta>0?'+':'')+x.delta);
    const p=(x.pct==null)?'':`ï¼ˆ${x.pct>0?'+':''}${x.pct}%ï¼‰`;
    return `<div class="kpi"><div class="k-head"><span>${esc(x.label)}</span><span class="tag">${esc(x.unit||'')}</span></div>
      <div class="k-val">${esc(x.value_str||'â€”')}</div><div class="k-delta">${esc(d)} ${esc(p)} Â· ${esc(x.source||'')}</div>
      ${x.spark_svg || '<svg class="spark" viewBox="0 0 100 44"><path d="M2,30 L98,30" stroke="rgba(128,128,128,.35)" fill="none"/></svg>'}</div>`;
  }
  document.getElementById('kMetals').innerHTML=((D.kpis&&D.kpis.metals)||[]).map(kpiBox).join('');
  document.getElementById('kMacro').innerHTML=((D.kpis&&D.kpis.macro)||[]).map(kpiBox).join('');

  function render(){
    nav.innerHTML=''; main.innerHTML='';
    (D.sections||[]).forEach((sec,idx)=>{
      const events=(sec.events||[]).filter(ev=>matchView(ev)&&matchQuery(ev));
      const a=document.createElement('a'); a.href='#'+sec.id; a.className=(idx===0?'active':'');
      a.innerHTML=`<span>${esc(sec.name)}</span><span class="badge">${events.length}</span>`;
      a.addEventListener('click',(e)=>{e.preventDefault(); document.getElementById(sec.id).scrollIntoView({behavior:'smooth',block:'start'});
        [...nav.querySelectorAll('a')].forEach(x=>x.classList.remove('active')); a.classList.add('active');});
      nav.appendChild(a);

      const wrap=document.createElement('section'); wrap.className='section'; wrap.id=sec.id;
      wrap.innerHTML=`<div class="section-head"><div class="section-title">${esc(sec.name)}</div><div class="small">${events.length} æ¡ï¼ˆèšç±»äº‹ä»¶ï¼‰</div></div>`;
      const brief=document.createElement('div'); brief.className='brief';
      const briefText=(view==='cn')?(sec.brief_cn||sec.brief_zh||''):(view==='global')?(sec.brief_global||sec.brief_zh||''):(sec.brief_zh||'');
      brief.textContent=briefText||'ï¼ˆä»Šæ—¥è¯¥æ¿å—æš‚æ— å¯ç”¨å†…å®¹ï¼‰'; wrap.appendChild(brief);

      if(sec.tags && sec.tags.length){
        const t=document.createElement('div'); t.className='actions';
        t.innerHTML=sec.tags.slice(0,8).map(x=>`<span class="tag">${esc(x)}</span>`).join(''); wrap.appendChild(t);
      }

      const cards=document.createElement('div'); cards.className='cards';
      const limit=(S.readingMode==='30m')?(S.perSection30m||5):(S.perSectionFull||15);
      events.slice(0,limit).forEach(ev=>{
        const fb=getFB(ev.id);
        const card=document.createElement('div'); card.className='event';
        card.innerHTML=`<div class="e-title">${esc(ev.title_zh||ev.title||'')}</div>
          <div class="e-meta"><span>${esc(ev.source_hint||'')}</span><span>${esc(ev.date||'')} Â· ${ev.region==='cn'?'ä¸­å›½ç›¸å…³':'å…¨çƒ'}</span></div>
          <div class="e-sum">${esc(ev.summary_zh||'')}</div>
          <div class="e-links"><a class="link" href="${esc(ev.url||'#')}" target="_blank" rel="noopener">æ‰“å¼€åŸæ–‡</a>
            <div class="fb">
              <button class="iconbtn ${fb&&fb.v===1?'active good':''}" title="æœ‰ç”¨">ğŸ‘</button>
              <button class="iconbtn ${fb&&fb.v===-1?'active bad':''}" title="æ— ç”¨">ğŸ‘</button>
            </div></div>`;
        card.addEventListener('click',(e)=>{if(e.target&&e.target.classList.contains('iconbtn'))return; if(ev.url) window.open(ev.url,'_blank','noopener');});
        const [g,b]=card.querySelectorAll('.iconbtn');
        g.addEventListener('click',(e)=>{e.stopPropagation(); setFB(ev.id,1);});
        b.addEventListener('click',(e)=>{e.stopPropagation(); setFB(ev.id,-1);});
        cards.appendChild(card);
      });
      wrap.appendChild(cards); main.appendChild(wrap);
    });
  }
  q.addEventListener('input',()=>render());
  document.getElementById('btnHome').addEventListener('click',()=>{main.scrollTo({top:0,behavior:'smooth'});});
  render();

  function renderSettings(tab){
    tabs.forEach(t=>t.classList.toggle('active',t.dataset.tab===tab));
    if(tab==='general'){
      pbody.innerHTML=`<div class="row"><div><div style="font-size:13px;font-weight:850">ä¸»é¢˜</div><div class="label">auto è·Ÿéšç³»ç»Ÿï¼›dark/light å¼ºåˆ¶</div></div>
        <select class="input" id="themeSel"><option value="auto">auto</option><option value="dark">dark</option><option value="light">light</option></select></div>
        <div class="note">å»ºè®®å›ºå®šâ€œ30åˆ†é’Ÿé›†ä¸­é˜…è¯»â€ï¼Œå…¶ä½™æ—¶é—´å…³é—­ç¢ç‰‡åŒ–æ¨é€ã€‚</div>`;
      const sel=document.getElementById('themeSel'); sel.value=S.theme;
      sel.addEventListener('change',()=>{S.theme=sel.value; save(); applyTheme();});
    } else if(tab==='layout'){
      pbody.innerHTML=`<div class="row"><div><div style="font-size:13px;font-weight:850">é˜…è¯»æ¨¡å¼</div><div class="label">30mï¼šæ¯æ  Top ${S.perSection30m}ï¼›fullï¼šæ¯æ  Top ${S.perSectionFull}</div></div>
        <select class="input" id="modeSel"><option value="30m">30m</option><option value="full">full</option></select></div>
        <div class="row"><div><div style="font-size:13px;font-weight:850">30m æ¯æ æ¡æ•°</div><div class="label">å»ºè®® 5</div></div><input class="input" id="n30" value="${S.perSection30m}"/></div>
        <div class="row"><div><div style="font-size:13px;font-weight:850">Full æ¯æ æ¡æ•°</div><div class="label">å»ºè®® 10â€“20</div></div><input class="input" id="nfull" value="${S.perSectionFull}"/></div>
        <button class="btn" id="saveLayout" style="margin-top:6px">ä¿å­˜</button>`;
      const mode=document.getElementById('modeSel'); mode.value=S.readingMode;
      mode.addEventListener('change',()=>{S.readingMode=mode.value; save(); render();});
      document.getElementById('saveLayout').addEventListener('click',()=>{
        const n30=parseInt(document.getElementById('n30').value,10);
        const nf=parseInt(document.getElementById('nfull').value,10);
        S.perSection30m=isFinite(n30)?Math.max(3,Math.min(10,n30)):5;
        S.perSectionFull=isFinite(nf)?Math.max(10,Math.min(20,nf)):15;
        save(); render(); alert('å·²ä¿å­˜');
      });
    } else if(tab==='algo'){
      pbody.innerHTML=`<div class="row"><div><div style="font-size:13px;font-weight:850">æ—¶æ•ˆ</div><div class="label">timeliness</div></div><input class="input" id="w1" value="${W.timeliness.toFixed(2)}"/></div>
      <div class="row"><div><div style="font-size:13px;font-weight:850">æƒå¨</div><div class="label">authority</div></div><input class="input" id="w2" value="${W.authority.toFixed(2)}"/></div>
      <div class="row"><div><div style="font-size:13px;font-weight:850">ç›¸å…³</div><div class="label">relevance</div></div><input class="input" id="w3" value="${W.relevance.toFixed(2)}"/></div>
      <div class="row"><div><div style="font-size:13px;font-weight:850">å½±å“</div><div class="label">impact</div></div><input class="input" id="w4" value="${W.impact.toFixed(2)}"/></div>
      <div class="row"><div><div style="font-size:13px;font-weight:850">æ–°é¢–</div><div class="label">novelty</div></div><input class="input" id="w5" value="${W.novelty.toFixed(2)}"/></div>
      <button class="btn" id="saveW" style="margin-top:6px">ä¿å­˜å¹¶å½’ä¸€åŒ–</button>
      <div class="note">ç”Ÿæˆç«¯å¯è¯»å–è¯¥æƒé‡ä»¥å®ç°â€œé€‰é¢˜é—­ç¯â€ã€‚</div>`;
      document.getElementById('saveW').addEventListener('click',()=>{
        const vals=[parseFloat(w1.value),parseFloat(w2.value),parseFloat(w3.value),parseFloat(w4.value),parseFloat(w5.value)]
          .map(v=>isFinite(v)?Math.max(0.01,Math.min(0.9,v)):0.2);
        const sum=vals.reduce((a,b)=>a+b,0);
        W.timeliness=+(vals[0]/sum).toFixed(2); W.authority=+(vals[1]/sum).toFixed(2); W.relevance=+(vals[2]/sum).toFixed(2);
        W.impact=+(vals[3]/sum).toFixed(2); W.novelty=+(vals[4]/sum).toFixed(2);
        save(); alert('å·²ä¿å­˜ï¼š'+JSON.stringify(W));
      });
    } else if(tab==='config'){
      pbody.innerHTML=`<div style="font-size:13px;font-weight:900;margin-bottom:6px">è‡ªç”±æ‰©å±•ç±»ç›®ä¸æ•°æ®ç»´åº¦</div>
      <div class="note"><b>ç±»ç›®</b>ï¼šåœ¨ <code>digest_config.json</code> çš„ <code>sections</code> é‡Œæ–°å¢ä¸€æ¡ï¼Œç”Ÿæˆå™¨ä¼šè‡ªåŠ¨æ¸²æŸ“å¯¼èˆªä¸æ¿å—ã€‚<br><br>
      <b>æ•°æ®ç»´åº¦</b>ï¼šåœ¨ <code>digest_config.json</code> çš„ <code>kpis</code> é‡Œæ–°å¢ FRED åºåˆ—ï¼ˆæˆ–æœªæ¥æ¥å…¥ LME æˆæƒæºï¼‰ï¼Œå³ä¾§ä¼šè‡ªåŠ¨å‡ºç° KPI å¡ + è¶‹åŠ¿å°å›¾ã€‚</div>`;
    }
  }
  tabs.forEach(t=>t.addEventListener('click',()=>renderSettings(t.dataset.tab)));
  document.getElementById('btnSettings').addEventListener('click',()=>{overlay.classList.add('open'); renderSettings('general');});
  document.getElementById('btnClose').addEventListener('click',()=>overlay.classList.remove('open'));
  overlay.addEventListener('click',(e)=>{if(e.target===overlay) overlay.classList.remove('open');});

  document.getElementById('btnExport').addEventListener('click',()=>{
    const keys=Object.keys(localStorage).filter(k=>k.startsWith(fbPrefix));
    const payload={generated_at:new Date().toISOString(),items:[]};
    for(const k of keys){ try{const o=JSON.parse(localStorage.getItem(k)); payload.items.push({id:k.replace(fbPrefix,''),v:o.v,t:o.t});}catch(e){} }
    const blob=new Blob([JSON.stringify(payload,null,2)],{type:'application/json'});
    const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='digest_feedback_'+(D.date||'')+'.json'; a.click();
  });
  document.getElementById('btnClearFB').addEventListener('click',()=>{
    const keys=Object.keys(localStorage).filter(k=>k.startsWith(fbPrefix));
    keys.forEach(k=>localStorage.removeItem(k)); updateFBCount(); render();
  });
})();
</script>
</body></html>